<ion-header>
  <ion-button class="back-button" fill="clear" (click)="goBack()">
    <ion-icon slot="start" name="arrow-back-outline"></ion-icon>
    Volver
  </ion-button>
</ion-header>

<ion-content class="login-container" fullscreen>
  <div class="overlay"></div> <!-- Superposición para el fondo -->

  <div class="content-wrapper">
    <div class="logo-container">
      <img src="assets/img/logohotel.png" alt="Hotel Logo" class="hotel-logo">
    </div>

    <ion-card class="login-card">
      <ion-card-content>
        <ion-text class="welcome-text">
          <h1>Bienvenido</h1>
          <p>Ingrese sus datos para acceder</p>
        </ion-text>

        <form [formGroup]="formLogin" (ngSubmit)="login()"> <!-- Usando el FormGroup -->
          <ion-item class="input-item">
            <ion-label position="stacked">Usuario</ion-label>
            <ion-input type="text" formControlName="user" required></ion-input> <!-- Usando formControlName -->
          </ion-item>
          <!-- Mensaje de error para el campo de usuario -->
          <ion-note color="danger" *ngIf="formLogin.get('user')?.invalid && formLogin.get('user')?.touched">
            El usuario es obligatorio.
          </ion-note>

          <ion-item class="input-item">
            <ion-label position="stacked">Contraseña</ion-label>
            <ion-input type="password" formControlName="password" required></ion-input> <!-- Usando formControlName -->
          </ion-item>
          <!-- Mensaje de error para el campo de contraseña -->
          <ion-note color="danger" *ngIf="formLogin.get('password')?.invalid && formLogin.get('password')?.touched">
            La contraseña es obligatoria.
          </ion-note>

          <!-- Mostrar mensaje de error si las credenciales son incorrectas -->
          <ion-note color="danger" *ngIf="loginError">Credenciales inválidas. Inténtalo de nuevo.</ion-note>

          <div class="button-container">
            <ion-button expand="block" class="login-button" type="submit" [disabled]="formLogin.invalid || isLoading">
              Ingresar
            </ion-button>
          </div>
        </form>

        <ion-spinner *ngIf="isLoading" name="crescent"></ion-spinner> <!-- Spinner de carga -->
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-title>© 2024 Grupo3 DUOC-UC</ion-title>
  </ion-toolbar>
</ion-footer>
